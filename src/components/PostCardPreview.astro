---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import FormattedDate from "./FormattedDate.astro";
import { withBase, getPostSlug } from "../utils/helpers";

type Props = { post: CollectionEntry<"blogs"> };
const { post } = Astro.props;
const { title, pubDate, description, image } = post.data;
---

<a class="font-bold" href={withBase("/blog/" + getPostSlug(post))}>
  <div class="flex flex-col sm:flex-row gap-3 sm:gap-4">
    {
      image && image.url && (
        <>
          {typeof image.url === "string" ? (
            <Image
              class="w-full h-auto sm:w-[280px] sm:h-[157px] shrink-0 object-cover rounded-lg"
              src={image.url}
              alt={image.alt || ""}
              width={280}
              height={157}
            />
          ) : (
            <Image
              class="w-full h-auto sm:w-[280px] sm:h-[157px] shrink-0 object-cover rounded-lg"
              src={image.url}
              alt={image.alt || ""}
              width={280}
              height={157}
            />
          )}
        </>
      )
    }
    <div class="flex flex-col max-w-fit">
      <h2 class="mb-1 text-balance">{title}</h2>
      <FormattedDate date={new Date(pubDate)} />
      {
        description && (
          <p class="font-light text-sm sm:text-base text-balance">
            {description}
          </p>
        )
      }
    </div>
  </div>
</a>
